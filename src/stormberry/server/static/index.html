<!DOCTYPE HTML>
<html>
    <head>
        <link rel="stylesheet" href="/assets/css/style.css" />
        <script src="/assets/js/jquery-3.1.0.min.js"></script>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <title>Stormberry Weather</title>
    </head>

    <body>
        <h1>Current Weather</h1>
        <noscript>
            <p>This website requires Javascript</p>
        </noscript>

        <div class="padded-bottom-40">
            <div class="temp-meter meter-container">
                <object
                    data="/assets/images/gauge-cold-warm.svg"
                    width="45%">
                </object>
                <h3 class="meter-label">Comfort</h3>
            </div>
            <div class="safety-meter meter-container">
                <object
                    data="/assets/images/gauge-simple.svg"
                    width="45%">
                </object>
                <h3 class="meter-label">Air Quality</h3>
            </div>
        </div>

        <p><span class="current-comfort"></span> Current conditions are <span class="current-temp-f"></span>F/<span class="current-temp"></span>C, with humidity <span class="current-humidity"></span>% and dewpoint <span class="current-dewpoint-f"></span>F/<span class="current-dewpoint"></span>C.</p>
        <p><span class="basic-prediction"></span> <span class="basic-temp-trend"></span></p>
        <p><span class="safe-to-run"></span> It feels like <span class="sc-value-f"></span>F/<span class="sc-value"></span>C.</p>
        <p><span class="environment-quality"></span>
        <hr />
        <h1>24-hour Conditions</h1>
        <div id="hourlyDewpointChart"></div>
        <hr />
        <p>Last weather reading was <span class="latest-datapoint-time"></span>. Comfort reading based on <span class="sc-method"></span>.</p>

    <script src="../assets/js/stormberry.js"></script>

    <script type="text/javascript">
        $(document).ready(function(){
            preparePage();
        });

        function preparePage() {

            let displaySection = decodeURIComponent(location.hash.substring(1));
            $('.dynamic-item').addClass('hidden');
            $('.nav-item').removeClass('active');

            switch(displaySection) {
                case "":
                case "current-conditions":
                    stormberry.displayLatestComfort();
                    stormberry.displayLatestCondition();
                    stormberry.displayBasicPrediction();
                    stormberry.displayEnvironmentQuality();
                    stormberry.initConditionCharts();
                    $('.current-conditions').removeClass('hidden');
                    $('.current-conditions-nav').addClass('active');
                    break;
                case "past-week":
                    stormberry.displayWeeklyCharts();
                    stormberry.displayWeeklyTrends();
                    $('.past-week-nav').addClass('active');
                    $('.past-week').removeClass('hidden');
                    break;
            }
        }

        window.addEventListener("hashchange", preparePage);
    </script>

    </body>
</html>
